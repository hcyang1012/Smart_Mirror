<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script type="text/javascript" src="./planetxsdk.js"></script>
    <link href="style.css" rel="stylesheet">
    <title></title>

    <script language="javascript">
        var sky_images = '{ \
            "SKY_O00": "38", \
            "SKY_O01": "01", \
            "SKY_O02": "02", \
            "SKY_O03": "03", \
            "SKY_O04": "12", \
            "SKY_O05": "13", \
            "SKY_O06": "14", \
            "SKY_O07": "18", \
            "SKY_O08": "21", \
            "SKY_O09": "32", \
            "SKY_O10": "04", \
            "SKY_O11": "29", \
            "SKY_O12": "26", \
            "SKY_O13": "27", \
            "SKY_O14": "28" \
        }';
        $(function () {
            currentTime();
            PlanetX.init({
                appkey: "5a1403f8-c7f9-3201-bf5c-5ec75921d26c",   // 본인의 appkey 정보 입력
                client_id: "558478fd-aafb-32fd-bcf0-91199c5b21e2", // 본인의 client id 정보 입력
            });
            weather();
        });


        function weather_callback(data) {
            var weather_code = data.weather.hourly[0].sky.code;
            var weather_img = JSON.parse(sky_images)[weather_code] + ".png";
            $("#weather_image").attr("src", "./weather_icons/" + weather_img);

            var temperature = data.weather.hourly[0].temperature.tc;
            var strTemp = "";
            if (temperature.substr(0, 1) == "-") {
                strTemp = temperature.substr(0, 2);
            } else {
                strTemp = temperature.substr(0, 1);
            }
            $("#temperature").text(strTemp);

        }


        function weather() {
            PlanetX.api("get", "http://apis.skplanetx.com/weather/current/hourly", "JSON",
                {
                    "version": 1,
                    /* 마북동 좌표 */
                    "lon": 127.1239976,
                    "lat": 37.3038171,
                },
            weather_callback);
        }


        function currentTime() {
            var now = new Date();
            var strDates = ["일", "월", "화", "수", "목", "금", "토"];
            var strDate = (now.getMonth() + 1) + "월 " + now.getDate() + "일 " + strDates[now.getDay()] + "요일";
            var strTime = (now.getHours() % 12) + ":" + now.getMinutes();
            var strAMPM = (now.getHours() > 12) ? "오후" : "오전";
            $("#date").text(strDate);
            $("#time").text(strTime);
            $("#AMPM").text(strAMPM);
            setTimeout("currentTime()", 1000);
        }

    </script>
</head>
<body>
    <div class="container" style="width:100%;">
        <div class="row">
            <div class="col-xs-offset-3 col-xs-4 text-right" >
                <div style="line-height:40px; margin-top:25px;">
                    <label id="time" style="font-size:80px; font-weight:100;"></label>
                    <label id="AMPM" style="font-size:45px; font-weight:100;"></label>
                    <div class="text-right"><label id="date" style="font-size:30px; font-weight:100;"></label></div>
                </div>
            </div>
            <div class="col-xs-5" style="font-size:80px;">
                <img id="weather_image" style="width:50%;" /><label id="temperature" style="margin:10px; font-weight:100;"></label><sup style="font-size:40px; font-weight:100;">℃</sup>
            </div>
        </div>
    </div>

</body>
</html>